# 🚀 快速設定指南 - 修復環境變數錯誤

## ✅ 已完成

已自動從 `localbizfinder-477001-40e17afc46ea.json.json` 檔案提取並設定：
- ✅ `GOOGLE_SERVICE_ACCOUNT_EMAIL`: `places-api-service@localbizfinder-477001.iam.gserviceaccount.com`
- ✅ `GOOGLE_SERVICE_ACCOUNT_KEY`: 已自動填入（包含完整私鑰）

## 📝 需要手動填入的環境變數

請編輯 `soloai-website/.env.local` 檔案，填入以下三個環境變數：

### 1. GOOGLE_SHEETS_ID

**取得方式：**
1. 開啟您的 Google Sheets（或創建新的）
2. 查看網址列，例如：`https://docs.google.com/spreadsheets/d/1ABC123XYZ789/edit`
3. 複製 `1ABC123XYZ789` 這部分（在 `/d/` 和 `/edit` 之間）

**在 .env.local 中填入：**
```bash
GOOGLE_SHEETS_ID=1ABC123XYZ789
```

### 2. GOOGLE_CALENDAR_ID

**取得方式：**
1. 開啟 [Google Calendar](https://calendar.google.com/)
2. 點擊左側「我的日曆」旁的「設定」圖示（齒輪）
3. 選擇「設定」→「我的日曆」
4. 找到您要使用的日曆，點擊「整合日曆」
5. 複製「日曆 ID」（通常是 Email 格式）

**在 .env.local 中填入：**
```bash
GOOGLE_CALENDAR_ID=your-calendar@group.calendar.google.com
```

**或使用主要日曆：**
```bash
GOOGLE_CALENDAR_ID=your-email@gmail.com
```

### 3. GEMINI_API_KEY

**取得方式：**
1. 前往 [Google AI Studio](https://makersuite.google.com/app/apikey)
2. 登入您的 Google 帳號
3. 點擊「Create API Key」
4. 複製產生的 API 金鑰

**在 .env.local 中填入：**
```bash
GEMINI_API_KEY=AIzaSyAbCdEfGhIjKlMnOpQrStUvWxYz1234567
```

## 📋 完整的 .env.local 檔案範例

您的 `.env.local` 檔案應該看起來像這樣：

```bash
# Google Sheets API 設定
GOOGLE_SHEETS_ID=1ABC123XYZ789abcdefghijklmnopqrstuvwxyz

# Google Calendar API 設定
GOOGLE_CALENDAR_ID=your-calendar@group.calendar.google.com

# Google Service Account 設定（已自動填入）
GOOGLE_SERVICE_ACCOUNT_EMAIL=places-api-service@localbizfinder-477001.iam.gserviceaccount.com
GOOGLE_SERVICE_ACCOUNT_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCiq2ncGAqpOI96\n...\n-----END PRIVATE KEY-----\n"

# Google Gemini API 設定
GEMINI_API_KEY=AIzaSyAbCdEfGhIjKlMnOpQrStUvWxYz1234567
```

## 🔄 重新啟動開發伺服器

**重要：** 修改 `.env.local` 後，必須重新啟動開發伺服器！

1. **停止當前的開發伺服器**
   - 在終端機中按 `Ctrl + C`

2. **重新啟動開發伺服器**
   ```bash
   cd soloai-website
   npm run dev
   ```

## ✅ 驗證設定

重新啟動後，提交預約表單，檢查終端機輸出。您應該會看到：

```
📋 環境變數讀取檢查:
  GOOGLE_SERVICE_ACCOUNT_EMAIL: places-api-service@localbizfinder-477001.iam.gserviceaccount.com
  GOOGLE_SERVICE_ACCOUNT_KEY:
    長度: 1679 字符
    前 50 字符預覽: -----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0...
    是否包含換行符: 是
    是否包含 \n 字串: 否
```

如果所有環境變數都顯示「已設定」，表示設定成功！🎉

## 🆘 如果仍然顯示「❌ 未設定」

1. ✅ 確認 `.env.local` 檔案在 `soloai-website` 目錄下（與 `package.json` 同級）
2. ✅ 確認檔案名稱正確（`.env.local`，前面有點）
3. ✅ 確認已重新啟動開發伺服器
4. ✅ 確認環境變數名稱正確（大小寫敏感，沒有多餘空格）
5. ✅ 確認沒有語法錯誤（引號配對正確）

## 📞 需要協助？

如果遇到問題，請檢查：
- 終端機的完整錯誤訊息
- `.env.local` 檔案的內容（確保格式正確）
- 是否已重新啟動開發伺服器

---

**完成設定後，預約功能應該就能正常運作了！** 🚀










